<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pos System</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css"
          integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" rel="stylesheet">
</head>
<body>

<section class="container-fluid">
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Uresha POS System</a>
            <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                    class="navbar-toggler" data-bs-target="#navbarSupportedContent"
                    data-bs-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a aria-current="page" class="nav-link active" href="#" id="Ghome">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="Gorder">Orders</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="Gitem">Items</a>
                    </li>

                    <li class="nav-item dropdown">
                        <a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#"
                           id="navbarDropdown" role="button">
                            Others
                        </a>
                        <ul aria-labelledby="navbarDropdown" class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" id="Gcustomer">Customer</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                        </ul>
                    </li>
                </ul>
                <form class="d-flex">
                    <button class="btn btn-lg btn-primary" disabled type="button">Sign Up</button>
                    <button class="btn btn-secondary btn-lg" disabled type="button">Log Out</button>
                </form>
            </div>
        </div>
        <hr>
    </nav>
</section>


<section id="homeClass" style="background-color: #efefef">
    <div class="carousel slide" data-bs-ride="carousel" id="carouselExampleIndicators">
        <div class="carousel-indicators">
            <button aria-current="true" aria-label="Slide 1" class="active" data-bs-slide-to="0"
                    data-bs-target="#carouselExampleIndicators" type="button"></button>
            <button aria-label="Slide 2" data-bs-slide-to="1" data-bs-target="#carouselExampleIndicators"
                    type="button"></button>
            <button aria-label="Slide 3" data-bs-slide-to="2" data-bs-target="#carouselExampleIndicators"
                    type="button"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img alt="..." class="d-block w-100" src="assets/img/pexels-daria-shevtsova-1095550.jpg">
            </div>
            <div class="carousel-item">
                <img alt="..." class="d-block w-100" src="assets/img/pexels-ella-olsson-1640777.jpg">
            </div>
            <div class="carousel-item">
                <img alt="..." class="d-block w-100" src="assets/img/pexels-lisa-fotios-1279330.jpg">
            </div>
        </div>
        <button class="carousel-control-prev" data-bs-slide="prev" data-bs-target="#carouselExampleIndicators"
                type="button">
            <span aria-hidden="true" class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" data-bs-slide="next" data-bs-target="#carouselExampleIndicators"
                type="button">
            <span aria-hidden="true" class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>

<!--customer-->
<section id="customerClass">
    <section class="container" style="padding-top: 40px;font-size: 20px">

        <img alt="" src="assets/img/icons8-customer-64.png" style="width: 20px;
     height: 20px;display: inline-block"><h5>Customer</h5>
    </section>
    <section class="container" style="background-color: #efefef">

        <table class="table table-success table-striped">
            <thead>
            <tr>
                <th scope="col">Home>Customer</th>
            </tr>
            </thead>
        </table>

        <section class="row mt-3 justify-content-around">
            <form class="col-12 col-md-3" style="background-color: white;display: inline-block">
                <div class="modal-header" style="background-color: green">
                    <h5 class="modal-title">Customer Search</h5>
                </div>
                <section style="padding: 20px">
                    <div class="mb-3">
                        <label class="form-label" for="exampleInputEmail1">Input Name/NIC/Tp Here</label>
                        <input id="customerIdSearch" aria-describedby="emailHelp" class="form-control" id="exampleInputEmail1" type="text">
                    </div>
                    <button id="searchCustomer" class="btn btn-primary col-3" type="submit">Search</button>
                    <select class="col-3">
                        <option>Name</option>
                    </select>
                </section>
            </form>

            <section class="col-12 col-md-3" style="display: inline-block">
                <button class="btn btn-primary" id="saveCustomer" type="button">Add New
                    Customer
                </button>

                <button class="btn btn-warning" type="button">View All Customers</button>
            </section>

            <div class="col-6 col-md-5">
                <div class="mb-3">
                    <label class="form-label" for="custID">Customer ID</label>
                    <input class="form-control" id="custId" placeholder="Customer ID" type="text">
                    <p><small class="text-danger p-1" id="error"></small></p>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="custName">Customer Name</label>
                    <input class="form-control" id="custName" placeholder="Customer Name" type="text">
                    <p><small class="text-danger p-1" id="error1"></small></p>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="custAddress">Customer Address</label>
                    <input class="form-control" id="custAddress" placeholder="Customer Address" type="text">
                    <p><small class="text-danger p-1" id="error2"></small></p>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="custTP">Customer Tp</label>
                    <input class="form-control" id="custTP" placeholder="Customer Tp" type="text">
                    <p><small class="text-danger p-1" id="error3"></small></p>
                </div>
            </div>
        </section>
        <section style="padding: 20px">
            <button class="btn btn-danger" id="updateCustomer" type="button">Update</button>
            <button class="btn btn-primary" type="button">Details</button>
            <button class="btn btn-success" type="button">Clear</button>
        </section>

        <section class="row mt-4">
            <div class="col">
                <table id="tableCus" class="table table-hover">
                    <thead class="bg-danger text-white">
                    <tr>
                        <th>Customer ID</th>
                        <th>Customer Name</th>
                        <th>Customer Address</th>
                        <th>Customer Tp.</th>
                    </tr>
                    </thead>
                    <tbody id="customerTable">


                    </tbody>
                </table>
            </div>
        </section>

    </section>
</section>

<!--item-->
<section id="itemClass">
    <section class="container" style="padding-top: 40px;font-size: 20px"><i class="fas fa-users"
                                                                            style="width: 20px;height: auto"></i>Items
    </section>
    <section class="container" style="background-color: #efefef">

        <table class="table table-success table-striped">
            <thead>
            <tr>
                <th scope="col">Home>Items</th>
            </tr>
            </thead>
        </table>
        <section class="row mt-3 justify-content-around">
            <form class="col-12 col-md-3" style="background-color: white; display: inline-block">
                <div class="modal-header" style="background-color: green">
                    <h5 class="modal-title">Item Search</h5>
                </div>
                <section style="padding: 20px">
                    <div class="mb-3">
                        <label class="form-label" for="exampleInputEmail11">Input Item Name/Code Here</label>
                        <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail11" type="text">
                    </div>
                    <button id="searchItem" class="btn btn-primary col-3" type="submit">Search</button>
                    <select class="col-3">
                        <option>Name</option>
                    </select>
                </section>
            </form>

            <section class="col-12 col-md-3" style="display: inline-block">
                <button class="btn btn-primary" id="saveItem" type="button">New Item</button>
                <button class="btn btn-warning" type="button">View All Items</button>
            </section>
            <div class="col-12 col-md-5">
                <div class="mb-3">
                    <label class="form-label" for="itemCode">Item Code</label>
                    <input class="form-control" id="itemCode" placeholder="Item Code" type="text">
                    <p><small class="text-danger p-1" id="error5"></small></p>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="itemName">Item Name</label>
                    <input class="form-control" id="itemName" placeholder="Item Name" type="text">
                    <p><small class="text-danger p-1" id="error6"></small></p>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="itemQty">Item Qty</label>
                    <input class="form-control" id="itemQty" placeholder="Item Qty" type="text">
                    <p><small class="text-danger p-1" id="error7"></small></p>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="itemPrice">Item Price</label>
                    <input class="form-control" id="itemPrice" placeholder="Item Price" type="text">
                    <p><small class="text-danger p-1" id="error8"></small></p>
                </div>
            </div>
        </section>
        <section style="padding: 20px">
            <button id="updateItem" class="btn btn-danger" type="button">Update</button>
            <button class="btn btn-primary" type="button">Details</button>
            <button class="btn btn-success" type="button">Clear</button>
        </section>


        <section class="row mt-4">
            <div class="col">
                <table id="tableIte" class="table table-hover">
                    <thead class="bg-danger text-white">
                    <tr>
                        <th scope="col">Item Code</th>
                        <th scope="col">Item Name</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Price</th>
                    </tr>
                    </thead>
                    <tbody id="itemTable">

                    </tbody>
                </table>
            </div>
        </section>
    </section>
</section>

<!--order-->
<section id="orderClass">
    <br><br><br>
    <table class="table table-dark table-striped" style="position: relative;
    top: 12px;">
        <thead>
        <tr>
            <th scope="col">Home > Orders</th>
        </tr>
        </thead>
    </table>
    <section style="background-color: gray;padding: 20px">

        <form class="col-4 " style="background-color: white; padding: 20px;display: inline-block">
            <legend style="background-color: green">Invoice Details</legend>
            <div class="row">
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail40">Order ID:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail40" type="email">
                </div>
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail4">Date:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail4" type="email">
                </div>
            </div>
            <div class="row">
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail2">Customer:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail2" type="email">
                </div>
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail5">Customer ID:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail5" type="email">
                </div>
            </div>
            <div class="row">
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail3">Name:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail3" type="email">
                </div>
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail6">Salary:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail6" type="email">
                </div>
            </div>
            <div class="col-12">
                <label class="form-label" for="exampleInputEmail7">Address:</label>
                <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail7" type="email">
            </div>
        </form>

        <form class="col-4 " style="background-color: white; padding: 20px;display: inline-block">
            <legend style="background-color: green">Item Select</legend>
            <div class="row">
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail8">Item:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail8" type="email">
                </div>
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail9">Item Code:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail9" type="email">
                </div>
            </div>
            <div class="row">
                <div class="col col-5">
                    <label class="form-label" for="exampleInputEmail10">Item Name:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail10" type="email">
                </div>
                <div class="col col-4">
                    <label class="form-label" for="exampleInputEmail41">Price:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail41" type="email">
                </div>
                <div class="col col-3">
                    <label class="form-label" for="exampleInputEmail12">QtyOnH:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail12" type="email">
                </div>
            </div>
            <div class="col-12">
                <label class="form-label" for="exampleInputEmail13">Order Quantity:</label>
                <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail13" type="email">
            </div>
            <br>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button class="btn btn-danger" type="button">Add Item</button>
            </div>
        </form>

        <form class="col-3 " style="background-color: white; padding: 20px;display: inline-block">
            <br>
            <label class="form-label" style="color: #0dcaf0;font-size: 20px">Total : 1050Rs/=</label><br>
            <label class="form-label" style="color: #bb2d3b;font-size: 20px">SubTotal : 945Rs/=</label>
            <div class="row">
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail14">Cash:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail14" type="email">
                </div>
                <div class="col col-6">
                    <label class="form-label" for="exampleInputEmail15">Discount:</label>
                    <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail15" type="email">
                </div>
            </div>
            <div class="col-12">
                <label class="form-label" for="exampleInputEmail16">Balance:</label>
                <input aria-describedby="emailHelp" class="form-control" id="exampleInputEmail16" type="email">
            </div>
            <br>
            <div class="d-grid gap-2 col-6 mx-auto">
                <button class="btn btn-success" type="button">Purchase</button>
            </div>
        </form>
        <br><br>

        <table class="table">
            <thead class="table-success">
            <tr>
                <th scope="col">Item Code</th>
                <th scope="col">Item Name</th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <th scope="row">P002</th>
                <td>Keerisamba 5Kg</td>
                <td>525.00</td>
                <td>2</td>
                <td>1050</td>
            </tr>
            </tbody>
        </table>
    </section>
</section>
<script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/jQuery/jquery-3.6.0.min.js"></script>
<script src="assets/db/DB.js"></script>
<script>
    var demo1 = document.getElementById("customerClass");
    demo1.style.display = "none";

    var demo2 = document.getElementById("itemClass");
    demo2.style.display = "none";

    var demo3 = document.getElementById("orderClass");
    demo3.style.display = "none";

    var demo4 = document.getElementById("homeClass");

    document.getElementById("Gcustomer").addEventListener("click", function () {
        demo4.style.display = "none";
        demo2.style.display = "none";
        demo3.style.display = "none";
        demo1.style.display = "inline";
    });
    document.getElementById("Gitem").addEventListener("click", function () {
        demo4.style.display = "none";
        demo1.style.display = "none";
        demo3.style.display = "none";
        demo2.style.display = "inline";
    });
    document.getElementById("Gorder").addEventListener("click", function () {
        demo4.style.display = "none";
        demo2.style.display = "none";
        demo1.style.display = "none";
        demo3.style.display = "inline";
    });
    document.getElementById("Ghome").addEventListener("click", function () {
        demo3.style.display = "none";
        demo2.style.display = "none";
        demo1.style.display = "none";
        demo4.style.display = "inline";
    });

    /*Table Data*/

    /*Customer*/
    enableBtn();



    $("#custId").keydown(function (event) { // event data object

        if (event.key == "Enter") {
            if (cuId == 1) {
                $("#custName").focus();
            } else {
                alert("wrong Input");
            }
        }
    });

    $("#custName").keydown(function (event) { // event data object
        if (event.key == "Enter") { // if the enter key press
            if (cuName == 1) {
                $("#custAddress").focus();
            } else {
                alert("Wrong Input");
            }
        }
    });

    $("#custAddress").keydown(function (event) { // event data object
        if (event.key == "Enter") { // if the enter key press
            if (cuAddress == 1) {
                $("#custTP").focus();
            } else {
                alert("Wrong Input");
            }
        }
    });

    $("#custTP").keydown(function (event) { // event data object
        if (event.key == "Enter") { // if the enter key press
            if (cuTp == 1) {
                saveCus();
            } else {
                alert("Wrong Input");
            }
        }
    });

    function saveCustomer() {
        let customerID = $("#custId").val();
        let customerName = $("#custName").val();
        let customerAddress = $("#custAddress").val();
        let customersalary = $("#custTP").val();

        var customerObject = {
            id: customerID,
            name: customerName,
            address: customerAddress,
            salary: customersalary
        };
        customerDB.push(customerObject);
    }

    function clearAll() {
        $('#custId,#custName,#custAddress,#custTP').val("");
        $('#custId,#custName,#custAddress,#custTP').css('border', '2px solid #ced4da');
        $('#custId').focus();
        $("#saveCustomer").attr('disabled', true);
        loadAllCustomers();
    }

    function loadAllCustomers() {
        $("#customerTable").empty();
        for (var i of customerDB) {
            let row = `<tr><td>${i.id}</td><td>${i.name}</td><td>${i.address}</td><td>${i.salary}</td></tr>`;
            $("#customerTable").append(row);
        }
    }

    $("#searchCustomer").click(function () {
        var searchID = $("#customerIdSearch").val();

        var response = searchCustomer(searchID);
        if (response) {
            $("#custId").val(response.id);
            $("#custName").val(response.name);
            $("#custAddress").val(response.address);
            $("#custTP").val(response.salary);
        }else{
            clearAll();
            alert("No Such a Customer");
        }
    });

    function searchCustomer(id) {
        for (let i = 0; i < customerDB.length; i++) {
            if (customerDB[i].id == id) {
                return customerDB[i];
            }
        }
    }

    function deleteCustomer(id) {
        for (let i = 0; i < customerDB.length; i++) {
            if (customerDB[i].id == id) {
                customerDB.splice(i,1);
            }
        }
        loadAllCustomers();
        return;
    }

    function saveCus() {
        saveCustomer();
        clearAll();
        loadAllCustomers();

        $("#customerTable>tr").click(function () {
            var rIndex = this.rowIndex;
            let cusID = $(this).children(":eq(0)").text();
            let cusName = $(this).children(":eq(1)").text();
            let cusAddress = $(this).children(":eq(2)").text();
            let cusTP = $(this).children(":eq(3)").text();

            $("#custId").val(cusID);
            $("#custName").val(cusName);
            $("#custAddress").val(cusAddress);
            $("#custTP").val(cusTP);

            $("#updateCustomer").click(function () {
                console.log(rIndex);
                if(cusID==document.getElementById("custId").value) {

                    for (let i = 0; i < customerDB.length; i++) {
                        if (customerDB[i].id == cusID) {
                            customerDB[i].name= $("#custName").val();
                            customerDB[i].address= $("#custAddress").val();
                            customerDB[i].salary= $("#custTP").val();
                            loadAllCustomers();
                        }
                    }
                }
            });
        });


        $("#customerTable>tr").dblclick(function () {
            let id = $(this).children(":eq(0)").text();
            let result = confirm("are you suwr?");
            if (result) {
                deleteCustomer(id);
            }
        });

    }

    $("#saveCustomer").click(function () {
        saveCus();
    });

    // validation Customer

    var cuId = 0;
    var regExCusID = /^(C00-)[0-9]{3,4}$/;
    $("#custId").keyup(function () {
        let input = $("#custId").val();
        if (regExCusID.test(input)) {
            $("#custId").css('border', '2px solid green');
            cuId = 1;
            enableBtn();
            $("#error").text("Success");
        } else {
            $("#custId").css('border', '2px solid red');
            cuId = 0;
            enableBtn();
            $("#error").text("Wrong format : C00-001");
        }
    });

    var cuName = 0;
    var regExCusName = /^[A-Za-z][A-Za-z_]{3,30}$/;
    $("#custName").keyup(function () {
        let input = $("#custName").val();
        if (regExCusName.test(input)) {
            $("#custName").css('border', '2px solid green');
            cuName = 1;
            enableBtn();
            $("#error1").text("Success");
        } else {
            $("#custName").css('border', '2px solid red');
            cuName = 0;
            enableBtn();
            $("#error1").text("Wrong format : Kavinda");
        }
    });

    var cuAddress = 0;
    var regExCusAddress = /^[a-zA-Z0-9]{4,}[ ][a-zA-Z]{4,}$/;
    $("#custAddress").keyup(function () {
        let input = $("#custAddress").val();
        if (regExCusAddress.test(input)) {
            $("#custAddress").css('border', '2px solid green');
            cuAddress = 1;
            enableBtn();
            $("#error2").text("Success");
        } else {
            $("#custAddress").css('border', '2px solid red');
            cuAddress = 0;
            enableBtn();
            $("#error2").text("Wrong format : Galle Mapalagama");
        }
    });

    var cuTp = 0;
    var regExCusTp = /^(077|071|078|075|076|072|074)[-]?[0-9]{7}$/;
    $("#custTP").keyup(function () {
        let input = $("#custTP").val();
        if (regExCusTp.test(input)) {
            $("#custTP").css('border', '2px solid green');
            cuTp = 1;
            enableBtn();
            $("#error3").text("Success");
        } else {
            $("#custTP").css('border', '2px solid red');
            cuTp = 0;
            enableBtn();
            $("#error3").text("Wrong format : 0710000000");
        }
    });

    function enableBtn() {
        const saveCustomerBtn = document.getElementById("saveCustomer");
        const updateCustomerBtn = document.getElementById("updateCustomer");
        saveCustomerBtn.disabled = true;
        updateCustomerBtn.disabled = true;
        var isTrue = (cuId + cuName + cuAddress + cuTp) == 4;
        if (isTrue) {
            saveCustomerBtn.disabled = false;
            updateCustomerBtn.disabled = false;
        }
    }


    /*item*/

    $("#itemCode").keydown(function (event) { // event data object

        if (event.key == "Enter") {
            $("#itemName").focus();
        }
    });

    $("#itemName").keydown(function (event) { // event data object
        if (event.key == "Enter") { // if the enter key press
            $("#itemQty").focus();
        }
    });

    $("#itemQty").keydown(function (event) { // event data object
        if (event.key == "Enter") { // if the enter key press
            $("#itemPrice").focus();
        }
    });

    $("#itemPrice").keydown(function (event) { // event data object
        if (event.key == "Enter") { // if the enter key press
            saveItemNow();
        }
    });

    $("#saveItem").click(function () {

        saveItemNow();
    });

    function saveItem() {
        let itemCode = $("#itemCode").val();
        let itemName = $("#itemName").val();
        let itemQty = $("#itemQty").val();
        let itemPrice = $("#itemPrice").val();

        var itemObject = {
            code: itemCode,
            name: itemName,
            qty: itemQty,
            price: itemPrice
        };
        itemDB.push(itemObject);
    }

    function clearAllItems() {
        $('#itemCode,#itemName,#itemQty,#itemPrice').val("");
        $('#itemCode,#itemName,#itemQty,#itemPrice').css('border', '2px solid #ced4da');
        $('#itemCode').focus();
        $("#saveItem").attr('disabled', true);
        loadAllItems();
    }

    function loadAllItems() {
        $("#itemTable").empty();
        for (var i of itemDB) {
            let row = `<tr><td>${i.code}</td><td>${i.name}</td><td>${i.qty}</td><td>${i.price}</td></tr>`;
            $("#itemTable").append(row);
        }
    }

    $("#searchItem").click(function () {
        var searchID = $("#exampleInputEmail11").val();

        var response = searchItem(searchID);
        if (response) {
            $("#itemCode").val(response.code);
            $("#itemName").val(response.name);
            $("#itemQty").val(response.qty);
            $("#itemPrice").val(response.price);
        }else{
            clearAll();
            alert("No Such a Customer");
        }
    });

    function searchItem(id) {
        for (let i = 0; i < itemDB.length; i++) {
            if (itemDB[i].code == id) {
                return itemDB[i];
            }
        }
    }

    function deleteItem(id) {
        for (let i = 0; i < itemDB.length; i++) {
            if (itemDB[i].code == id) {
                itemDB.splice(i,1);
            }
        }
        loadAllItems();
        return;
    }

    function saveItemNow() {
        saveItem();
        clearAllItems();
        loadAllItems();


        $("#itemTable>tr").click(function () {
            var rIndex2 = this.rowIndex;
            let itemCode = $(this).children(":eq(0)").text(); // select first td and get text
            let itemName = $(this).children(":eq(1)").text();
            let itemQty = $(this).children(":eq(2)").text();
            let itemPrice = $(this).children(":eq(3)").text();

            $("#itemCode").val(itemCode);
            $("#itemName").val(itemName);
            $("#itemQty").val(itemQty);
            $("#itemPrice").val(itemPrice);

            $("#updateItem").click(function () {
                if(itemCode==document.getElementById("itemCode").value) {
                    for (let i = 0; i < itemDB.length; i++) {
                        if (itemDB[i].code == itemCode) {
                            itemDB[i].name= $("#itemName").val();
                            itemDB[i].qty= $("#itemQty").val();
                            itemDB[i].price= $("#itemPrice").val();
                            loadAllItems();
                        }
                    }
                }
            });
        });

        $("#itemTable>tr").dblclick(function () {
            let itemCode = $(this).children(":eq(0)").text();
            let result = confirm("are you suwr?");
            if (result) {
                deleteItem(itemCode);
            }
        });
    }

    // validation Item

    var itemCod = 0;
    var regExItemCode = /^(I00-)[0-9]{3,4}$/;
    $("#itemCode").keyup(function () {
        let input = $("#itemCode").val();
        if (regExItemCode.test(input)) {
            $("#itemCode").css('border', '2px solid green');
            itemCod = 1;
            enableItemBtn();
            $("#error5").text("Success");
        } else {
            $("#itemCode").css('border', '2px solid red');
            itemCod = 0;
            enableItemBtn();
            $("#error5").text("Wrong format : I00-001");
        }
    });

    var itemNam = 0;
    var regExItemName = /^[A-Za-z][A-Za-z0-9_]{4,20}$/;
    $("#itemName").keyup(function () {
        let input = $("#itemName").val();
        if (regExItemName.test(input)) {
            $("#itemName").css('border', '2px solid green');
            itemNam = 1;
            enableItemBtn();
            $("#error6").text("Success");
        } else {
            $("#itemName").css('border', '2px solid red');
            itemNam = 0;
            enableItemBtn();
            $("#error6").text("Wrong format : redRice");
        }
    });

    var itemQt = 0;
    var regExItemQty = /^[1-9][0-9]{0,2}$/;
    $("#itemQty").keyup(function () {
        let input = $("#itemQty").val();
        if (regExItemQty.test(input)) {
            $("#itemQty").css('border', '2px solid green');
            itemQt = 1;
            enableItemBtn();
            $("#error7").text("Success");
        } else {
            $("#itemQty").css('border', '2px solid red');
            itemQt = 0;
            enableItemBtn();
            $("#error7").text("Wrong format : 98");
        }
    });

    var itemPric = 0;
    var regExItemPrice = /^[1-9][0-9]{1,3}([.][0-9]{2})?$/;
    $("#itemPrice").keyup(function () {
        let input = $("#itemPrice").val();
        if (regExItemPrice.test(input)) {
            $("#itemPrice").css('border', '2px solid green');
            itemPric = 1;
            enableItemBtn();
            $("#error8").text("Success");
        } else {
            $("#itemPrice").css('border', '2px solid red');
            itemPric = 0;
            enableItemBtn();
            $("#error8").text("Wrong format : 100 / 100.00");
        }
    });

    function enableItemBtn() {
        const saveItemBtn = document.getElementById("saveItem");
        const updateItemBtn = document.getElementById("updateItem");

        saveItemBtn.disabled = true;
        updateItemBtn.disabled=true;
        var isTrue = (itemCod + itemNam + itemQt + itemPric) == 4;
        if (isTrue) {
            saveItemBtn.disabled = false;
            updateItemBtn.disabled=false;
        }
    }

</script>
</body>
</html>
